// Generated by CoffeeScript 1.7.1
define(['jquery'], function($) {
  var utils;
  return utils = {
    createMathEditor: function(input, preview) {
      var MathEditor;
      MathEditor = (function() {
        function MathEditor(input, preview) {
          this.input = input;
          this.preview = preview;
        }

        MathEditor.prototype.delay = 300;

        MathEditor.prototype.timeout = null;

        MathEditor.prototype.running = false;

        MathEditor.prototype.update = function() {
          var thiz;
          thiz = this;
          if (this.timeout) {
            clearTimeout(this.timeout);
          }
          return this.timeout = setTimeout(function() {
            var text;
            if (thiz.running) {
              return;
            }
            text = $(thiz.input).val();
            $(thiz.preview).html(text);
            thiz.running = true;
            return MathJax.Hub.Queue(['Typeset', MathJax.Hub, $(thiz.dummy)[0]], ['done', thiz]);
          }, this.delay);
        };

        MathEditor.prototype.done = function() {
          return this.running = false;
        };

        return MathEditor;

      })();
      return new MathEditor(input, preview);
    }
  };
});


/*			
			oldText: null
			init: (input, preview) ->
				@preview = preview
			swapBuffers: ->
				buffer = @preview
				preview = @buffer
				buffer.style.visibility = 'hidden'
				buffer.style.position = 'absolute'
				preview.style.position = ''
				preview.style.visibility = ''
			update: ->
				if @timeout then clearTimeout @timeout
				@timeout = setTimeout @callback, @delay
			createPreview: ->
				@timeout = null
				if @mjRunning then return
				text = document.getElementById('math-input').value
				if text == @oldtext then return
				@buffer.innerHTML = @oldtext = text
				@mjRunning = true
				MathJax.Hub.Queue ['Typeset', MathJax.Hub, @buffer], ['previewDone', @]
			previewDone: ->
				@mjRunning = false
				@swapBuffers()
 */
