define(["me","routes/questionsRoute","routes/adminRoute","routes/testsRoute","ehbs!templates/header","ehbs!templates/footer","ehbs!templates/login","ehbs!templates/signup","ehbs!templates/error"],function(e,t,o,r){var n;return n={start:function(){var n;return n=Ember.Application.create(),e.attach(n,["User","Question","School"]),n.Router.map(function(){return this.route("login"),this.route("signup"),this.route("error",{path:"/error/:type"})}),t.setup(n),o.setup(n),r.setup(n),n.ApplicationRoute=Ember.Route.extend({model:function(){return e.auth.check()},actions:{logout:function(){var t;return t=this,e.auth.logout().then(function(){return t.controllerFor("application").set("model",{}),t.transitionTo("index")},function(){return!1}),!1}}}),n.ApplicationController=Ember.ObjectController.extend({isAdmin:function(){var e;return e=this.get("model.power"),e>=999?!0:!1}.property("model.power")}),n.IndexRoute=Ember.Route.extend({beforeModel:function(){var t;return t=this,e.auth.check().then(function(e){return t.transitionTo(null!=e?"questions":"login")},function(){return t.transitionTo("login")})}}),n.LoginRoute=Ember.Route.extend({model:function(){return this.store.createRecord("user",{})}}),n.LoginController=Ember.ObjectController.extend({error:null,needs:"application",actions:{login:function(){var t,o;return o=this,this.set("error",null),(t=this.get("model").validate(["username","password"]))?(e.auth.login(this.get("model")).then(function(e){return o.store.unloadAll("question"),o.store.unloadAll("school"),o.set("controllers.application.model",e),o.transitionToRoute("questions")},function(e){return o.set("error",e),!1}),!1):!1}}}),n.ErrorController=Ember.ObjectController.extend({message:function(){switch(this.get("type")){case"401":return"You do not have the permission to access the requested resource!";default:return"Something went wrong!"}}.property("type")})}}});