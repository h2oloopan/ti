define(["ehbs!templates/components/photo-upload","jquery.fileupload"],function(){var t;return t=Ember.Component.extend({didInsertElement:function(){var t;return this._super(),t=this,this.$("a.btn").click(function(){return t.$("input").click()}),this.$("input").fileupload({dataType:"json",done:function(e,n){return t.send("done",n)},fail:function(e,n){return t.send("fail",n)}})},actions:{done:function(t){var e,n;return n=t.response().result.files[0].url,e=this.get("question.photos"),null==e&&(e=[]),e.pushObject(n),this.set("question.photos",e),!1},fail:function(t){return alert("Something was wrong: "+t.errorThrown),!1},preview:function(t){return this.set("previewLink",t),this.set("insertLink",t.substr(t.lastIndexOf("/")+1)),this.$(".modal-photo-preview").modal(),!1},"delete":function(t){var e;return e=this.get("question.photos"),e.removeObject(t),this.set("question.photos",e),this.get("edit")?!1:($.ajax({url:"/api/images/location?url="+t,type:"DELETE"}).done(function(){return!1}).fail(function(){return!1}),!1)}}})});