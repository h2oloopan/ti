define(["jquery","me","utils","ehbs!templates/tests/tests.index","ehbs!templates/tests/tests.review","ehbs!templates/tests/tests.new"],function(){var e;return e={setup:function(e){return e.Router.map(function(){return this.resource("tests",function(){return this.route("new"),this.route("review")})}),e.TestsIndexRoute=Ember.Route.extend({model:function(){return this.store.find("test")}}),e.TestsIndexController=Ember.ArrayController.extend({sortProperties:["id"],sortAscending:!1,itemController:"testItem"}),e.TestItemController=Ember.ObjectController.extend({downloadPath:function(){return""}.property("model"),actions:{review:function(e){var t,s;return s=e.get("id"),t=[s],this.transitionToRoute("tests.review",{queryParams:{tests:JSON.stringify(t)}})}}}),e.TestsReviewRoute=Ember.Route.extend({queryParams:{tests:{refreshModel:!0,replace:!0}},model:function(e){return this.store.find("test",{ids:e.tests})}}),e.TestsReviewController=Ember.ArrayController.extend({queryParams:["tests"],tabs:function(){var e,t,s,r,n,i,o,u;if(i=this.get("model"),null==i)return[];for(n=[],e=0,s=["A","B","C"],t=o=0,u=i.get("length");u>=0?u>o:o>u;t=u>=0?++o:--o)r={name:"Test "+s[e],id:"t-"+s[e],link:"#t-"+s[e],test:i.content[e],active:!1},0===e&&(r.active=!0),0===e&&this.send("switch",i.content[e]),n.push(r),e++;return n}.property("model"),actions:{"switch":function(e){return this.set("test",e),this.set("settings",JSON.stringify(e.get("settings"))),!1},save:function(){return!1},publish:function(e){var t,s;return s=this,t=this.get("settings"),t=null==t?{}:JSON.parse(t),e.set("settings",t),e.set("public",!0),e.save().then(function(){return!0},function(e){return alert(e.responseText),!1}),!1}}}),e.QuestionItemView=Ember.View.extend({didInsertElement:function(){var e;return this._super(),e=this.get("element"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}})}}});